TODO: Refactor this function later
TODO: Update documentation
